<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2009. Axetta LLC. All Rights Reserved.
  -->

<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="ru.axetta.ecafe.processor.core.persistence.Org" table="CF_Orgs" optimistic-lock="version">
        <id name="idOfOrg" column="IdOfOrg" type="long">
            <generator class="hilo">
                <param name="table">CF_Generators</param>
                <param name="column">IdOfOrg</param>
                <param name="max_lo">0</param>
            </generator>
        </id>
        <version name="version" column="Version" type="long"/>
        <property name="shortName" column="ShortName" type="string" length="128" unique="true" not-null="true"/>
        <property name="officialName" column="OfficialName" type="string" length="128" not-null="true"/>
        <property name="address" column="Address" type="string" length="128" not-null="true"/>
        <property name="phone" column="Phone" type="string" length="32"/>
        <many-to-one name="officialPerson" class="ru.axetta.ecafe.processor.core.persistence.Person"
                     column="IdOfOfficialPerson" not-null="true" fetch="join"/>
        <property name="officialPosition" column="OfficialPosition" type="string" length="128" not-null="true"/>
        <property name="contractId" column="ContractId" type="string" length="50" not-null="true"/>
        <property name="contractTime" column="ContractDate" type="ru.axetta.ecafe.processor.core.persistence.DateType"
                  not-null="true"/>
        <property name="state" column="State" type="integer" not-null="true"/>
        <property name="cardLimit" column="CardLimit" type="long" not-null="true"/>
        <property name="publicKey" column="PublicKey" type="string" length="1024" not-null="true"/>
        <property name="idOfPacket" column="IdOfPacket" type="long" not-null="true"/>
        <property name="lastClientContractId" column="LastClientContractId" type="long" not-null="true"/>
        <property name="cypheredSsoPassword" column="SSOPassword" type="string" length="128"/>
        <property name="smsSender" column="SmsSender" type="string" length="32"/>
        <property name="priceOfSms" column="PriceOfSms" type="long" not-null="true"/>
        <property name="subscriptionPrice" column="SubscriptionPrice" type="long" not-null="true"/>
        <many-to-one name="defaultSupplier" class="ru.axetta.ecafe.processor.core.persistence.Contragent"
                     column="DefaultSupplier"
                     not-null="true"/>
        <set name="clientsInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.Client"/>
        </set>
        <set name="clientGroupsInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.ClientGroup"/>
        </set>
        <set name="syncHistoriesInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.SyncHistory"/>
        </set>
        <set name="ordersInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.Order"/>
        </set>
        <set name="orderDetailsInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.OrderDetail"/>
        </set>
        <set name="diaryTimesheetsInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.DiaryTimesheet"/>
        </set>
        <set name="diaryClassesInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.DiaryClass"/>
        </set>
        <set name="diaryValuesInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.DiaryValue"/>
        </set>

        <!-- Kadirov D (21.12.2011) -->
        <set name="enterEventsInternal" inverse="true" cascade="all">
            <key column="IdOfOrg"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.EnterEvent"/>
        </set>
    </class>
</hibernate-mapping>


