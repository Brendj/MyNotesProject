<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:rich="http://richfaces.org/rich"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <rich:popupPanel modal="true" id="modalDulSelectorPanel" autosized="true"
                     headerClass="modal-panel-header">
        <rich:hotKey key="esc" handler="#{rich:component('modalDulSelectorPanel')}.hide();return false;"/>
        <f:facet name="header">
            <h:outputText escape="true" value="Выбор Документа"/>
        </f:facet>

        <rich:dataTable width="100%" align="center" id="modalDulSelectorTable"
                        value="#{mainPage.dulSelectPage.dulGuideList}" var="item" rows="20"
                        footerClass="data-table-footer" columnClasses="left-aligned-column"
                        rowClasses="select-panel-row" onrowmouseover="this.style.backgroundColor='#e6e6e6'"
                        onrowmouseout="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
                        onrowclick="#{rich:element('detail')}.click();">

            <rich:column width="1" >
                <f:facet name="header">
                    <h:outputText escape="true" value="" />
                </f:facet>
                <a4j:commandButton id="detail" execute="@this" value="" style="display: none;"
                                   oncomplete="if (#{facesContext.maximumSeverity == null}) #{rich:component('modalDulSelectorPanel')}.hide();"
                                   action="#{mainPage.completeDulSelectSelection}"
                                   render="#{mainPage.topMostPage.pageComponent.id}, modalClientSelectorForm">
                    <f:setPropertyActionListener value="#{item}" target="#{mainPage.dulSelectPage.dulGuide}" />
                </a4j:commandButton>
            </rich:column>

            <rich:column headerClass="column-header">
                <h:outputText escape="true" value="#{item.name}" styleClass="output-text"/>
            </rich:column>

            <f:facet name="footer">
                <h:panelGroup styleClass="borderless-div">

                    <a4j:commandButton value="Отмена"
                                       render="#{mainPage.topMostPage.pageComponent.id}"
                                       action="#{mainPage.completeDulSelectSelection}"
                                       oncomplete="if (#{facesContext.maximumSeverity == null}) #{rich:component('modalDulSelectorPanel')}.hide();"
                                       styleClass="command-button" style="width: 80px;">
                        <f:setPropertyActionListener value="#{null}"
                                                     target="#{mainPage.clientSelectPage.selectedItem}"/>
                    </a4j:commandButton>
                </h:panelGroup>
            </f:facet>
        </rich:dataTable>

    </rich:popupPanel>
</ui:composition>