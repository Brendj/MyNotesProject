<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2009. Axetta LLC. All Rights Reserved.
  -->

<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="ru.axetta.ecafe.processor.core.persistence.Contragent" table="CF_Contragents"
           optimistic-lock="version">
        <cache usage="transactional"/>
        <id name="idOfContragent" column="IdOfContragent" type="long">
            <generator class="org.hibernate.id.enhanced.SequenceStyleGenerator">
                <param name="optimizer">pooled-lo</param>
                <param name="increment_size">3</param>
                <param name="sequence_name">CF_Contragents_Id_Gen_seq</param>
            </generator>
        </id>
        <version name="version" column="Version" type="long"/>
        <many-to-one name="contactPerson" class="ru.axetta.ecafe.processor.core.persistence.Person"
                     column="IdOfContactPerson" not-null="true" fetch="select"/>
        <property name="parentId" column="ParentId" type="integer"/>
        <property name="contragentName" column="ContragentName" type="string" length="128" not-null="true"/>
        <property name="classId" column="ClassId" type="integer" not-null="true"/>
        <property name="flags" column="Flags" type="integer" not-null="true"/>
        <property name="title" column="Title" type="string" length="30" not-null="true"/>
        <property name="address" column="Address" type="string" length="128" not-null="true"/>
        <property name="phone" column="Phone" type="string" length="32"/>
        <property name="mobile" column="Mobile" type="string" length="32"/>
        <property name="email" column="Email" type="string" length="128"/>
        <property name="requestNotifyMailList" column="RequestNotifyMailList" type="string" length="1024"/>
        <property name="orderNotifyMailList" column="OrderNotifyMailList" type="string" length="1024"/>
        <property name="fax" column="Fax" type="string" length="32"/>
        <property name="remarks" column="Remarks" type="string" length="1024"/>
        <property name="inn" column="INN" type="string" length="90"/>
        <property name="bank" column="Bank" type="string" length="90"/>
        <property name="bic" column="BIC" type="string" length="15"/>
        <property name="okato" column="OKATO" type="string" length="11"/>
        <property name="oktmo" column="OKTMO" type="string" length="11"/>
        <property name="corrAccount" column="CorrAccount" type="string" length="20"/>
        <property name="account" column="Account" type="string" length="20"/>
        <property name="kpp" column="kpp" type="string" length="10" />
        <property name="ogrn" column="ogrn" type="string" length="15"/>
        <property name="createTime" column="CreatedDate" type="ru.axetta.ecafe.processor.core.persistence.DateType"
                  not-null="true"/>
        <property name="updateTime" column="LastUpdate" type="ru.axetta.ecafe.processor.core.persistence.DateType"
                  not-null="true"/>
        <property name="publicKey" column="PublicKey" type="string" length="1024" not-null="true"/>
        <property name="publicKeyGOSTAlias" column="PublicKeyGOSTAlias" type="string" length="64" />
        <property name="needAccountTranslate" column="NeedAccountTranslate"
                  type="ru.axetta.ecafe.processor.core.persistence.BoolType" not-null="true"/>
        <set name="usersInternal" table="CF_UserContragents">
            <key column="IdOfContragent"/>
            <many-to-many class="ru.axetta.ecafe.processor.core.persistence.User" column="idofuser"/>
        </set>
        <set name="contragentPaymentsInternal" inverse="true" cascade="all">
            <key column="IdOfContragent"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.ContragentPayment"/>
        </set>
        <set name="clientPaymentsInternal" inverse="true" cascade="all">
            <key column="IdOfContragent"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.ClientPayment"/>
        </set>
        <set name="clientPaymentOrdersInternal" inverse="true" cascade="all">
            <key column="IdOfContragent"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.ClientPaymentOrder"/>
        </set>
        <set name="contragentClientAccountsInternal" inverse="true" cascade="all">
            <key column="IdOfContragent"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.ContragentClientAccount"/>
        </set>
        <set name="payerSettlementsInternal" inverse="true" cascade="all">
            <key column="IdOfContragentPayer"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.Settlement"/>
        </set>
        <set name="receiverSettlementsInternal" inverse="true" cascade="all">
            <key column="IdOfContragentReceiver"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.Settlement"/>
        </set>
        <set name="debtorPositionsInternal" inverse="true" cascade="all">
            <key column="IdOfContragentDebtor"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.CurrentPosition"/>
        </set>
        <set name="creditorPositionsInternal" inverse="true" cascade="all">
            <key column="IdOfContragentCreditor"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.CurrentPosition"/>
        </set>
        <set name="POSSetInternal" inverse="true" cascade="all">
            <key column="IdOfContragent"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.POS"/>
        </set>
        <set name="ordersInternal" inverse="true" cascade="all">
            <key column="IdOfContragent"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.Order"/>
        </set>
        <set name="orgsInternal" inverse="true" cascade="all">
            <cache usage="transactional"/>
            <key column="defaultsupplier"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.Org"/>
        </set>
        <set name="payerAddPaymentsInternal" inverse="true" cascade="all">
            <key column="IdOfContragentPayer"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.AddPayment"/>
        </set>
        <set name="receiverAddPaymentsInternal" inverse="true" cascade="all">
            <key column="IdOfContragentReceiver"/>
            <one-to-many class="ru.axetta.ecafe.processor.core.persistence.AddPayment"/>
        </set>

        <many-to-one name="defaultPayContragent"
                     column="DefaultContragent"
                     class="ru.axetta.ecafe.processor.core.persistence.Contragent"
                    cascade="save-update"/>

        <property name="payByCashier" column="PayByCashier"
                  type="ru.axetta.ecafe.processor.core.persistence.BoolType"/>
        <one-to-one name="contragentSync" class="ru.axetta.ecafe.processor.core.persistence.ContragentSync" cascade="all"/>
    </class>
</hibernate-mapping>


